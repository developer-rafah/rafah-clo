<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ØªØ¨Ø±Ø¹ ÙØ§Ø¦Ø¶ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ | Ø¬Ù…Ø¹ÙŠØ© Ø±ÙØ§Ù‡</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
:root{
  --bg:#0e0b14;
  --bg2:#1a1326;
  --p:#7a5ea8;
  --s:#b88fcf;
  --txt:#f3f4f6;
  --muted:#b6b1c6;
  --wa:#25D366;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Tajawal",sans-serif;
  color:var(--txt);
  background:
    radial-gradient(700px 400px at 80% 20%, rgba(184,143,207,.16), transparent 60%),
    linear-gradient(180deg,var(--bg),var(--bg2));
}

/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
.entry-popup{
  position:fixed; inset:0;
  display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(8px);
  z-index:9999;
}
.entry-box{
  max-width:320px;
  padding:18px 22px;
  border-radius:18px;
  background:linear-gradient(135deg,var(--p),var(--s));
  font-size:16px;
  font-weight:800;
  text-align:center;
  animation:scaleUp .4s ease;
}
@keyframes scaleUp{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}

/* Scroll Reveal */
.reveal{opacity:0;transform:translateY(22px);transition:.8s}
.reveal.show{opacity:1;transform:none}

/* Ø§Ù„ØªØ®Ø·ÙŠØ· */
.wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
.card{
  width:min(1050px,100%);
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.15);
  backdrop-filter:blur(14px);
  border-radius:30px;
  display:grid;
  grid-template-columns:1fr 1fr;
}
@media(max-width:900px){.card{grid-template-columns:1fr}}

.content{padding:40px;text-align:center}
.logo{
  max-width:170px;
  margin:0 auto 26px;
  display:block;
  animation:breath 4s ease-in-out infinite;
}
@keyframes breath{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.04)}
}

h1{
  font-size:clamp(26px,4vw,40px);
  font-weight:900;
  background:linear-gradient(90deg,#fff,var(--s));
  -webkit-background-clip:text;
  color:transparent;
}
p{line-height:1.9;color:#e5e7eb}

.btn{
  margin-top:28px;
  padding:15px 28px;
  font-size:17px;
  font-weight:900;
  border:none;
  border-radius:999px;
  cursor:pointer;
  color:#fff;
  background:linear-gradient(135deg,var(--p),var(--s));
  box-shadow:0 10px 28px rgba(184,143,207,.35);
}

/* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ */
.visual{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:32px;
}
.impact{
  width:140px;
  height:140px;
  border-radius:50%;
  border:1.2px dashed rgba(255,255,255,.22);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
}
.impact span{
  position:absolute;
  font-weight:900;
  font-size:15px;
  opacity:0;
  transform:scale(.9);
  animation:impactFade 2.6s ease-in-out infinite;
}
@keyframes impactFade{
  0%{opacity:0;transform:scale(.9)}
  20%{opacity:1;transform:scale(1)}
  80%{opacity:1;transform:scale(1)}
  100%{opacity:0;transform:scale(1.05)}
}

/* Ø§Ù„Ù†ÙˆØ§ÙØ° */
.modal{
  position:fixed; inset:0;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(6px);
  display:none;
  align-items:center; justify-content:center;
  z-index:999;
}
.modal-box{
  width:min(420px,92%);
  background:rgba(255,255,255,.1);
  border:1px solid rgba(255,255,255,.25);
  border-radius:22px;
  padding:24px;
}
input{
  width:100%;
  margin-top:12px;
  padding:13px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.35);
  color:#fff;
}
.submit{
  margin-top:14px;
  width:100%;
  padding:14px;
  border-radius:999px;
  border:none;
  font-weight:900;
  background:linear-gradient(135deg,var(--s),var(--p));
  color:#fff;
}

/* âœ… Ø¥Ø¶Ø§ÙØ© ØµØºÙŠØ±Ø©: ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.submit:disabled{
  opacity:.55;
  cursor:not-allowed;
}

/* Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
#map{
  width:100%;
  height:300px;
  border-radius:16px;
  margin-top:12px;
}
.map-hint{
  font-size:14px;
  font-weight:700;
  color:#fff;
  background:rgba(122,94,168,.9);
  padding:10px 14px;
  border-radius:12px;
  text-align:center;
}

/* ÙˆØ§ØªØ³Ø§Ø¨ */
.whatsapp{
  position:fixed;
  bottom:18px;left:18px;
  width:52px;height:52px;
  border-radius:50%;
  background:linear-gradient(135deg,#2eea7b,var(--wa));
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 12px 28px rgba(37,211,102,.45);
}
.whatsapp img{width:26px}

footer{text-align:center;font-size:12px;color:var(--muted);margin:20px}
</style>
</head>

<body>

<div class="entry-popup" id="entryPopup">
  <div class="entry-box">ÙØ§Ø¦Ø¶Ùƒ Ø§Ù„ÙŠÙˆÙ…â€¦ Ø³ØªØ±ÙŒ ÙˆØ¯ÙØ¡ Ù„ØºÙŠØ±Ùƒ ğŸ¤</div>
</div>

<div class="wrap">
  <div class="card reveal">
    <div class="content reveal">
      <img src="https://i.ibb.co/hJdgK2MB/2.png" class="logo" alt="Ø¬Ù…Ø¹ÙŠØ© Ø±ÙØ§Ù‡">
      <h1>ØªØ¨Ø±Ø¹ ÙØ§Ø¦Ø¶ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³</h1>
      <p>ØªØ¨Ø±Ø¹Ùƒ ÙŠØ³Ù‡Ù… ÙÙŠ Ø³ØªØ± Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ø­ØªØ§Ø¬Ø© ÙˆÙŠØ¹Ø²Ø² Ø§Ù„ØªÙƒØ§ÙÙ„ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ.</p>
      <button class="btn" onclick="openForm()">ØªØ¨Ø±Ø¹ Ø§Ù„Ø¢Ù†</button>
    </div>

    <div class="visual reveal">
      <div class="impact">
        <span id="impactText">Ø£Ø«Ø±Ùƒ Ù…Ø³ØªÙ…Ø±</span>
      </div>
    </div>
  </div>
</div>

<!-- Ù†Ù…ÙˆØ°Ø¬ -->
<div class="modal" id="formModal">
  <div class="modal-box" id="formBox">
    <!-- âœ… ÙÙ‚Ø· Ø£Ø¶ÙØª id Ù„Ù„Ø­Ù‚ÙˆÙ„ (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø´ÙƒÙ„Ù‡Ø§) -->
    <input id="name" placeholder="Ø§Ù„Ø§Ø³Ù…">
    <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
    <input id="area" placeholder="Ø§Ù„Ø­ÙŠ">

    <button class="submit" onclick="openMap()">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
    <div id="locationStatus" style="margin-top:10px;color:#b88fcf"></div>

    <!-- âœ… Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ù„Ù‡ id Ø­ØªÙ‰ Ù†ØºÙŠØ± Ø§Ù„Ù†Øµ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <button id="submitBtn" class="submit" onclick="submitForm()">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<!-- Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
<div class="modal" id="mapModal">
  <div class="modal-box">
    <div class="map-hint">
      Ø­Ø±Ù‘Ùƒ Ø§Ù„Ø¯Ø¨ÙˆØ³ ÙˆØ­Ø¯Ø¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªØ¨Ø±Ø¹
    </div>
    <div id="map"></div>
    <button class="submit" onclick="confirmLocation()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
  </div>
</div>

<!-- âœ… Ø¥Ø¶Ø§ÙØ©: Ù†Ù…ÙˆØ°Ø¬ Ù…Ø®ÙÙŠ Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„ØªØ¬Ø§ÙˆØ² CORS -->
<form id="hiddenForm"
      action="https://script.google.com/macros/s/AKfycbwFULb2SYEWf0MXA2h5lWXraXpMZQDoyn50NdkPefZS6d49bVMgHCYOtxE2ZQwGYgYq/exec"
      method="POST"
      target="hiddenFrame"
      style="display:none">
  <input name="name">
  <input name="phone">
  <input name="area">
  <input name="lat">
  <input name="lng">
  <input name="source">
</form>
<iframe name="hiddenFrame" style="display:none"></iframe>

<a class="whatsapp" href="https://wa.me/966502333499" target="_blank">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg">
</a>

<footer>Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø¬Ù…Ø¹ÙŠØ© Ø±ÙØ§Ù‡ Ù„Ù„Ø£Ø±Ø§Ù…Ù„ ÙˆØ§Ù„Ù…Ø·Ù„Ù‚Ø§Øª</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
/* âœ… Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Web App */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwFULb2SYEWf0MXA2h5lWXraXpMZQDoyn50NdkPefZS6d49bVMgHCYOtxE2ZQwGYgYq/exec";

/* Ø¥Ø®ÙØ§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
setTimeout(()=>document.getElementById("entryPopup").style.display="none",2600);

/* Scroll Reveal */
const obs=new IntersectionObserver(e=>e.forEach(i=>i.isIntersecting&&i.target.classList.add("show")),{threshold:.15});
document.querySelectorAll(".reveal").forEach(el=>obs.observe(el));

/* Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø«Ø± */
const impactTexts=["Ø£Ø«Ø±Ùƒ Ù…Ø³ØªÙ…Ø±","Ø¯ÙØ¡ ÙŠØµÙ„","Ø³ØªØ±ÙŒ ÙŠØ¯ÙˆÙ…","Ø®ÙŠØ±ÙŒ ÙŠØªØ¶Ø§Ø¹Ù"];
let idx=0;
setInterval(()=>{
  idx=(idx+1)%impactTexts.length;
  document.getElementById("impactText").textContent=impactTexts[idx];
},2600);

/* Ø§Ù„Ù†ÙˆØ§ÙØ° */
function openForm(){document.getElementById("formModal").style.display="flex"}

/* Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
let map,marker,lat=null,lng=null;

function openMap(){
  document.getElementById("mapModal").style.display="flex";
  setTimeout(()=>{
    if(map) return;
    map=L.map('map').setView([24.7136,46.6753],13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);
    marker=L.marker(map.getCenter(),{draggable:true}).addTo(map);
  },200);
}

function confirmLocation(){
  const p=marker.getLatLng();
  lat=p.lat; lng=p.lng;
  document.getElementById("locationStatus").textContent="âœ”ï¸ ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø¨Ø¯Ù‚Ø©";
  document.getElementById("mapModal").style.display="none";
}

/* âœ… ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± form Ù…Ø®ÙÙŠ (Ø­Ù„ CORS) */
function submitForm(){
  const name=(document.getElementById("name").value || "").trim();
  const phone=(document.getElementById("phone").value || "").trim();
  const area=(document.getElementById("area").value || "").trim();

  if(!name || !phone || !area){
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„Ø­ÙŠ");
    return;
  }
  if(lat === null || lng === null){
    alert("ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    return;
  }

  const btn = document.getElementById("submitBtn");
  btn.disabled = true;
  const oldText = btn.textContent;
  btn.textContent = "Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

  // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø®ÙÙŠ
  const form = document.getElementById("hiddenForm");
  form.name.value = name;
  form.phone.value = phone;
  form.area.value = area;
  form.lat.value = lat;
  form.lng.value = lng;
  form.source.value = "Ø§Ù„Ù…ÙˆÙ‚Ø¹";

  // Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¯ÙˆÙ† CORS
  form.submit();

  // Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
  setTimeout(()=>{
    document.querySelector("#formModal .modal-box").innerHTML =
      "Ø¬Ø²Ø§Ùƒ Ø§Ù„Ù„Ù‡ Ø®ÙŠØ±Ù‹Ø§ ğŸŒ·<br>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ÙƒØŒ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡.";
  }, 800);

  // ---- Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ ÙƒØ§Ù† ÙƒÙˆØ¯ fetch Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ù…ØªØºÙŠØ± WEB_APP_URL) ----
  // Ù„Ù… Ù†Ø­Ø°ÙÙ‡ØŒ Ù„ÙƒÙ†Ù†Ø§ Ù„Ù… Ù†Ø¹Ø¯ Ù†Ø³ØªØ®Ø¯Ù…Ù‡ Ù„Ø£Ù† Google Apps Script ÙŠØ³Ø¨Ø¨ CORS Ù…Ø¹ fetch/json.
}
</script>

</body>
</html>
